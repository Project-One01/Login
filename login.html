<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Novel - Login</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 1s ease 2s forwards;
        }

        .loading-text {
            font-size: 3rem;
            color: white;
            font-weight: bold;
            margin-bottom: 2rem;
            animation: pulse 1.5s ease-in-out infinite;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .loading-bar {
            width: 300px;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .loading-progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #fff, #f0f0f0);
            animation: loadProgress 2s ease forwards;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        @keyframes loadProgress {
            to { width: 100%; }
        }

        @keyframes fadeOut {
            to { opacity: 0; visibility: hidden; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .container {
            position: relative;
            z-index: 2;
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            opacity: 0;
            animation: fadeIn 1s ease 2.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 30px 25px;
            width: 100%;
            max-width: 420px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: translateY(20px);
            animation: slideUp 0.8s ease 2.5s forwards;
        }

        .card::-webkit-scrollbar {
            width: 8px;
        }

        .card::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 10px;
        }

        .card::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
        }

        @keyframes slideUp {
            to { transform: translateY(0); }
        }

        .card-title {
            font-size: 2rem;
            color: #667eea;
            text-align: center;
            margin-bottom: 1.5rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            animation: titleGlow 2s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1); }
            50% { text-shadow: 2px 2px 20px rgba(102, 126, 234, 0.5); }
        }

        .form-section {
            display: none;
            animation: slideInRight 0.5s ease;
        }

        .form-section.active {
            display: block;
        }

        @keyframes slideInRight {
            from { 
                opacity: 0;
                transform: translateX(50px);
            }
            to { 
                opacity: 1;
                transform: translateX(0);
            }
        }

        .input-group {
            margin-bottom: 16px;
            animation: fadeInUp 0.5s ease backwards;
        }

        .form-section.active .input-group:nth-child(2) { animation-delay: 0.1s; }
        .form-section.active .input-group:nth-child(3) { animation-delay: 0.2s; }
        .form-section.active .input-group:nth-child(4) { animation-delay: 0.3s; }
        .form-section.active .input-group:nth-child(5) { animation-delay: 0.4s; }
        .form-section.active .input-group:nth-child(6) { animation-delay: 0.5s; }
        .form-section.active .input-group:nth-child(7) { animation-delay: 0.6s; }
        .form-section.active .input-group:nth-child(8) { animation-delay: 0.7s; }
        .form-section.active .input-group:nth-child(9) { animation-delay: 0.8s; }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        label {
            display: block;
            margin-bottom: 6px;
            color: #333;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .password-wrapper {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .password-toggle:hover {
            transform: translateY(-50%) scale(1.15);
        }

        .password-toggle svg {
            width: 20px;
            height: 20px;
            stroke: #667eea;
            transition: all 0.3s ease;
        }

        .password-toggle:hover svg {
            stroke: #764ba2;
        }

        .password-toggle.active svg {
            animation: eyeBlink 0.3s ease;
        }

        @keyframes eyeBlink {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(0.8) rotateY(180deg); }
        }

        input, select {
            width: 100%;
            padding: 10px 14px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        input[type="number"] {
            appearance: textfield;
        }

        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            opacity: 1;
            height: 30px;
        }

        .password-strength {
            margin-top: 8px;
            height: 4px;
            background: #e0e0e0;
            border-radius: 2px;
            overflow: hidden;
            display: none;
        }

        .password-strength.show {
            display: block;
        }

        .password-strength-bar {
            height: 100%;
            width: 0%;
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .password-strength-text {
            font-size: 0.8rem;
            margin-top: 4px;
            display: none;
        }

        .password-strength-text.show {
            display: block;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 8px;
            animation: fadeInUp 0.5s ease backwards;
        }

        .radio-option {
            flex: 1;
            position: relative;
        }

        .radio-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .radio-label {
            display: block;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .radio-option input[type="radio"]:checked + .radio-label {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
            animation: radioSelect 0.4s ease;
        }

        @keyframes radioSelect {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1.05); }
        }

        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 8px;
            position: relative;
            overflow: hidden;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #f8f9ff;
            transform: translateY(-3px);
        }

        .social-login {
            margin: 20px 0;
        }

        .social-divider {
            text-align: center;
            position: relative;
            margin: 20px 0;
        }

        .social-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #e0e0e0;
        }

        .social-divider span {
            background: rgba(255, 255, 255, 0.95);
            padding: 0 15px;
            position: relative;
            color: #999;
            font-size: 0.9rem;
        }

        .social-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .social-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .social-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .social-btn.google {
            color: #DB4437;
            border-color: #DB4437;
        }

        .social-btn.facebook {
            color: #4267B2;
            border-color: #4267B2;
        }

        .social-btn.twitter {
            color: #1DA1F2;
            border-color: #1DA1F2;
        }

        .toggle-link {
            text-align: center;
            margin-top: 20px;
            color: #667eea;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .toggle-link:hover {
            color: #764ba2;
            transform: scale(1.05);
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            width: 100%;
            height: 2px;
            background: #e0e0e0;
            z-index: -1;
        }

        .progress-line {
            position: absolute;
            top: 15px;
            left: 0;
            height: 2px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            z-index: -1;
            transition: all 0.5s ease;
            width: 0%;
        }

        .step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #999;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }

        .step.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.2);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            animation: stepPulse 1s ease infinite;
        }

        @keyframes stepPulse {
            0%, 100% { transform: scale(1.2); }
            50% { transform: scale(1.3); }
        }

        .step.completed {
            background: #4caf50;
            color: white;
            animation: checkMark 0.5s ease;
        }

        @keyframes checkMark {
            0% { transform: scale(0); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        .success-animation {
            display: none;
            text-align: center;
            animation: bounceIn 0.8s ease;
        }

        .success-animation.active {
            display: block;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .success-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: rotate 1s ease;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .success-text {
            font-size: 1.5rem;
            color: #4caf50;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 0.9rem;
            display: none;
        }

        .error-message.show {
            display: block;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .forgot-password {
            text-align: right;
            margin-top: 8px;
            font-size: 0.85rem;
            color: #667eea;
            cursor: pointer;
            text-decoration: underline;
        }

        .forgot-password:hover {
            color: #764ba2;
        }

        .code-inputs {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .code-input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .code-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            transform: scale(1.1);
        }

        .info-text {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        .resend-link {
            text-align: center;
            margin-top: 15px;
            color: #667eea;
            cursor: pointer;
            font-size: 0.85rem;
            text-decoration: underline;
        }

        .resend-link:hover {
            color: #764ba2;
        }

        .resend-link.disabled {
            color: #999;
            cursor: not-allowed;
            text-decoration: none;
        }

        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            .card {
                padding: 25px 20px;
                border-radius: 20px;
                max-height: 95vh;
            }
            .card-title {
                font-size: 1.75rem;
                margin-bottom: 1.2rem;
            }
            .loading-text {
                font-size: 2.5rem;
            }
            .social-buttons {
                flex-direction: column;
            }
            .code-input {
                width: 45px;
                height: 55px;
                font-size: 1.75rem;
            }
        }
    </style>
</head>
<body>
    <div class="loading-screen">
        <div class="loading-text">Bayar di Sini</div>
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
    </div>

    <div class="container">
        <div class="card">
            <h1 class="card-title">Welcome</h1>

            <!-- Login Section -->
            <div class="form-section active" id="loginSection">
                <div class="error-message" id="loginError"></div>
                
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="Masukkan email Anda" autocomplete="email">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="loginPassword" placeholder="Masukkan password" autocomplete="current-password">
                        <span class="password-toggle" onclick="togglePassword('loginPassword', this)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path class="eye-open" d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle class="eye-open" cx="12" cy="12" r="3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <line class="eye-closed" x1="2" y1="2" x2="22" y2="22" stroke-width="2" stroke-linecap="round" style="display:none;"/>
                            </svg>
                        </span>
                    </div>
                </div>
                <div class="forgot-password" onclick="showForgotPassword()">Lupa Password?</div>
                
                <button class="btn btn-primary" id="loginBtn" onclick="login()">Masuk</button>
                
                <div class="social-login">
                    <div class="social-divider"><span>atau masuk dengan</span></div>
                    <div class="social-buttons">
                        <button class="social-btn google" onclick="socialLogin('google')">
                            <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill="#4285F4" d="M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 002.38-5.88c0-.57-.05-.66-.15-1.18z"/><path fill="#34A853" d="M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 01-7.18-2.54H1.83v2.07A8 8 0 008.98 17z"/><path fill="#FBBC05" d="M4.5 10.52a4.8 4.8 0 010-3.04V5.41H1.83a8 8 0 000 7.18l2.67-2.07z"/><path fill="#EA4335" d="M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 001.83 5.4L4.5 7.49a4.77 4.77 0 014.48-3.3z"/></svg>
                            Google
                        </button>
                        <button class="social-btn facebook" onclick="socialLogin('facebook')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="#4267B2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                            Facebook
                        </button>
                        <button class="social-btn twitter" onclick="socialLogin('twitter')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="#1DA1F2"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
                            Twitter
                        </button>
                    </div>
                </div>
                
                <div class="toggle-link" onclick="showRegister()">
                    Belum punya akun? Daftar di sini
                </div>
            </div>

            <!-- Forgot Password Section -->
            <div class="form-section" id="forgotPasswordSection">
                <div class="error-message" id="forgotError"></div>
                
                <p class="info-text">
                    Masukkan informasi Anda untuk mendapatkan kode verifikasi
                </p>
                
                <div class="input-group">
                    <label>Nama Lengkap</label>
                    <input type="text" id="forgotFullName" placeholder="Masukkan nama lengkap Anda">
                </div>
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" id="forgotEmail" placeholder="Masukkan email Anda" autocomplete="email">
                </div>
                <div class="input-group">
                    <label>Umur</label>
                    <input type="number" id="forgotAge" placeholder="Masukkan umur Anda" min="1">
                </div>
                
                <button class="btn btn-primary" id="sendCodeBtn" onclick="sendResetCode()">Kirim Kode ke Email</button>
                <button class="btn btn-secondary" onclick="backToLogin()">Kembali</button>
            </div>

            <!-- Code Verification Section -->
            <div class="form-section" id="codeVerificationSection">
                <div class="error-message" id="codeError"></div>
                
                <p class="info-text">
                    Kode verifikasi telah dikirim ke email Anda.<br>
                    Masukkan 6 digit kode di bawah ini:
                </p>
                
                <div class="code-inputs">
                    <input type="text" class="code-input" maxlength="1" id="code1" oninput="moveToNext(this, 'code2')" onkeydown="moveToPrev(event, null)">
                    <input type="text" class="code-input" maxlength="1" id="code2" oninput="moveToNext(this, 'code3')" onkeydown="moveToPrev(event, 'code1')">
                    <input type="text" class="code-input" maxlength="1" id="code3" oninput="moveToNext(this, 'code4')" onkeydown="moveToPrev(event, 'code2')">
                    <input type="text" class="code-input" maxlength="1" id="code4" oninput="moveToNext(this, 'code5')" onkeydown="moveToPrev(event, 'code3')">
                    <input type="text" class="code-input" maxlength="1" id="code5" oninput="moveToNext(this, 'code6')" onkeydown="moveToPrev(event, 'code4')">
                    <input type="text" class="code-input" maxlength="1" id="code6" oninput="verifyCode()" onkeydown="moveToPrev(event, 'code5')">
                </div>
                
                <button class="btn btn-primary" id="verifyCodeBtn" onclick="verifyCode()">Verifikasi Kode</button>
                <div class="resend-link" id="resendLink" onclick="resendCode()">
                    Kirim ulang kode (<span id="resendTimer">60</span>s)
                </div>
                <button class="btn btn-secondary" onclick="backToForgotPassword()">Kembali</button>
            </div>

            <!-- New Password Section -->
            <div class="form-section" id="newPasswordSection">
                <div class="error-message" id="newPasswordError"></div>
                
                <p class="info-text">
                    Buat password baru untuk akun Anda
                </p>
                
                <div class="input-group">
                    <label>Password Baru</label>
                    <div class="password-wrapper">
                        <input type="password" id="newPassword" placeholder="Min. 8 karakter, huruf besar & angka" oninput="checkPasswordStrength(this.value)">
                        <span class="password-toggle" onclick="togglePassword('newPassword', this)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path class="eye-open" d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle class="eye-open" cx="12" cy="12" r="3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <line class="eye-closed" x1="2" y1="2" x2="22" y2="22" stroke-width="2" stroke-linecap="round" style="display:none;"/>
                            </svg>
                        </span>
                    </div>
                    <div class="password-strength" id="passwordStrength">
                        <div class="password-strength-bar" id="passwordStrengthBar"></div>
                    </div>
                    <div class="password-strength-text" id="passwordStrengthText"></div>
                </div>
                <div class="input-group">
                    <label>Ulangi Password Baru</label>
                    <div class="password-wrapper">
                        <input type="password" id="newPasswordConfirm" placeholder="Ulangi password baru">
                        <span class="password-toggle" onclick="togglePassword('newPasswordConfirm', this)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path class="eye-open" d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle class="eye-open" cx="12" cy="12" r="3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <line class="eye-closed" x1="2" y1="2" x2="22" y2="22" stroke-width="2" stroke-linecap="round" style="display:none;"/>
                            </svg>
                        </span>
                    </div>
                </div>
                
                <button class="btn btn-primary" id="savePasswordBtn" onclick="saveNewPassword()">Simpan Password</button>
                <button class="btn btn-secondary" onclick="backToLogin()">Kembali ke Login</button>
            </div>

            <!-- Register Section - Step 1 -->
            <div class="form-section" id="registerSection">
                <div class="progress-steps">
                    <div class="progress-line" id="progressLine"></div>
                    <div class="step active">1</div>
                    <div class="step">2</div>
                </div>

                <div class="error-message" id="registerError"></div>

                <div class="input-group">
                    <label>Nama Lengkap</label>
                    <input type="text" id="regFullName" placeholder="Masukkan nama lengkap" autocomplete="name">
                </div>
                <div class="input-group">
                    <label>Nama Panggilan</label>
                    <input type="text" id="regNickname" placeholder="Masukkan nama panggilan" autocomplete="nickname">
                </div>
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" id="regEmail" placeholder="Masukkan email" autocomplete="email">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="regPassword" placeholder="Min. 8 karakter, huruf besar & angka" oninput="checkPasswordStrength(this.value)" autocomplete="new-password">
                        <span class="password-toggle" onclick="togglePassword('regPassword', this)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path class="eye-open" d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle class="eye-open" cx="12" cy="12" r="3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <line class="eye-closed" x1="2" y1="2" x2="22" y2="22" stroke-width="2" stroke-linecap="round" style="display:none;"/>
                            </svg>
                        </span>
                    </div>
                    <div class="password-strength" id="passwordStrength">
                        <div class="password-strength-bar" id="passwordStrengthBar"></div>
                    </div>
                    <div class="password-strength-text" id="passwordStrengthText"></div>
                </div>
                <div class="input-group">
                    <label>Ulangi Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="regPasswordConfirm" placeholder="Ulangi password" autocomplete="new-password">
                        <span class="password-toggle" onclick="togglePassword('regPasswordConfirm', this)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path class="eye-open" d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle class="eye-open" cx="12" cy="12" r="3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <line class="eye-closed" x1="2" y1="2" x2="22" y2="22" stroke-width="2" stroke-linecap="round" style="display:none;"/>
                            </svg>
                        </span>
                    </div>
                </div>
                <div class="input-group">
                    <label>Umur</label>
                    <input type="number" id="regAge" placeholder="Masukkan umur" min="1">
                </div>
                <div class="input-group">
                    <label>Jenis Kelamin</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="regGender" id="regMale" value="Laki-laki">
                            <label class="radio-label" for="regMale">Laki-laki</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="regGender" id="regFemale" value="Perempuan">
                            <label class="radio-label" for="regFemale">Perempuan</label>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="nextToPartner()">Selanjutnya</button>
                <button class="btn btn-secondary" onclick="backToLogin()">Kembali</button>
            </div>

            <!-- Partner Section - Step 2 -->
            <div class="form-section" id="partnerSection">
                <div class="progress-steps">
                    <div class="progress-line" style="width: 50%;"></div>
                    <div class="step completed">1</div>
                    <div class="step active">2</div>
                </div>

                <div class="error-message" id="partnerError"></div>

                <h3 style="text-align: center; color: #667eea; margin-bottom: 20px;">Data Pasangan</h3>

                <div class="input-group">
                    <label>Nama Lengkap Pasangan</label>
                    <input type="text" id="partnerFullName" placeholder="Masukkan nama lengkap pasangan">
                </div>
                <div class="input-group">
                    <label>Nama Panggilan Pasangan</label>
                    <input type="text" id="partnerNickname" placeholder="Masukkan nama panggilan pasangan">
                </div>
                <div class="input-group">
                    <label>Umur Pasangan</label>
                    <input type="number" id="partnerAge" placeholder="Masukkan umur pasangan" min="1">
                </div>
                <div class="input-group">
                    <label>Jenis Kelamin Pasangan</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="partnerGender" id="partnerMale" value="Laki-laki" disabled>
                            <label class="radio-label" for="partnerMale">Laki-laki</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="partnerGender" id="partnerFemale" value="Perempuan" disabled>
                            <label class="radio-label" for="partnerFemale">Perempuan</label>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary" id="completeBtn" onclick="completeRegistration()">Selesai</button>
                <button class="btn btn-secondary" onclick="backToRegister()">Kembali</button>
            </div>

            <!-- Success Section -->
            <div class="form-section success-animation" id="successSection">
                <div class="success-icon">✓</div>
                <div class="success-text">Berhasil!</div>
                <p class="info-text" id="successMessage">
                    Selamat datang di Visual Novel!
                </p>
                <button class="btn btn-primary" onclick="redirectToGame()">Mulai Petualangan</button>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // KONFIGURASI - GANTI URL INI!
        // ============================================
        const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbww_N1je32Bepddr9TqaQubTHa8mP1r7z_qtQWSzxmsRbhMyrtOILM9xnGuvcLu4dbB5Q/exec';

        // OAuth Configuration
        const OAUTH_CONFIG = {
            google: {
                clientId: 'YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com',
                authUrl: 'https://accounts.google.com/o/oauth2/v2/auth',
                scopes: 'email profile',
                responseType: 'token'
            },
            facebook: {
                appId: 'YOUR_FACEBOOK_APP_ID',
                authUrl: 'https://www.facebook.com/v12.0/dialog/oauth',
                scopes: 'email,public_profile'
            },
            twitter: {
                // Twitter memerlukan OAuth 2.0 PKCE
                clientId: 'YOUR_TWITTER_CLIENT_ID',
                authUrl: 'https://twitter.com/i/oauth2/authorize'
            }
        };

        let userData = {};
        let resetEmail = '';
        let resendTimer;

        // ============================================
        // FUNGSI TOGGLE PASSWORD
        // ============================================
        
        function togglePassword(inputId, toggleElement) {
            const input = document.getElementById(inputId);
            const eyeOpen = toggleElement.querySelectorAll('.eye-open');
            const eyeClosed = toggleElement.querySelector('.eye-closed');
            
            toggleElement.classList.add('active');
            setTimeout(() => toggleElement.classList.remove('active'), 300);
            
            if (input.type === 'password') {
                input.type = 'text';
                eyeOpen.forEach(el => el.style.display = 'none');
                eyeClosed.style.display = 'block';
            } else {
                input.type = 'password';
                eyeOpen.forEach(el => el.style.display = 'block');
                eyeClosed.style.display = 'none';
            }
        }

        // ============================================
        // FUNGSI PASSWORD STRENGTH
        // ============================================
        
        function checkPasswordStrength(password) {
            const strengthBar = document.getElementById('passwordStrengthBar');
            const strengthText = document.getElementById('passwordStrengthText');
            const strengthContainer = document.getElementById('passwordStrength');
            
            if (!password) {
                strengthContainer.classList.remove('show');
                strengthText.classList.remove('show');
                return;
            }
            
            strengthContainer.classList.add('show');
            strengthText.classList.add('show');
            
            let strength = 0;
            let messages = [];
            
            if (password.length >= 8) strength += 25;
            else messages.push('min. 8 karakter');
            
            if (/[A-Z]/.test(password)) strength += 25;
            else messages.push('huruf besar');
            
            if (/[a-z]/.test(password)) strength += 25;
            
            if (/[0-9]/.test(password)) strength += 25;
            else messages.push('angka');
            
            strengthBar.style.width = strength + '%';
            
            if (strength <= 25) {
                strengthBar.style.background = '#f44336';
                strengthText.style.color = '#f44336';
                strengthText.textContent = '❌ Lemah - Butuh: ' + messages.join(', ');
            } else if (strength <= 50) {
                strengthBar.style.background = '#ff9800';
                strengthText.style.color = '#ff9800';
                strengthText.textContent = '⚠️ Sedang - Butuh: ' + messages.join(', ');
            } else if (strength <= 75) {
                strengthBar.style.background = '#2196f3';
                strengthText.style.color = '#2196f3';
                strengthText.textContent = '✓ Bagus';
            } else {
                strengthBar.style.background = '#4caf50';
                strengthText.style.color = '#4caf50';
                strengthText.textContent = '✓✓ Sangat Kuat!';
            }
        }

        // ============================================
        // FUNGSI CODE INPUT NAVIGATION
        // ============================================
        
        function moveToNext(current, nextId) {
            if (current.value.length === 1 && nextId) {
                document.getElementById(nextId).focus();
            }
        }

        function moveToPrev(event, prevId) {
            if (event.key === 'Backspace' && event.target.value === '' && prevId) {
                document.getElementById(prevId).focus();
            }
        }

        // ============================================
        // FUNGSI SOCIAL LOGIN
        // ============================================
        
        function socialLogin(provider) {
            const config = OAUTH_CONFIG[provider];
            
            if (!config) {
                alert('Provider ' + provider + ' belum dikonfigurasi');
                return;
            }

            let authUrl = '';
            const redirectUri = encodeURIComponent(window.location.origin + '/oauth-callback.html');
            const state = Math.random().toString(36).substring(7);
            
            switch(provider) {
                case 'google':
                    if (config.clientId === 'YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com') {
                        alert('⚠️ Google OAuth belum dikonfigurasi!\n\nSilakan:\n1. Buat project di Google Cloud Console\n2. Enable Google+ API\n3. Buat OAuth 2.0 Client ID\n4. Masukkan Client ID di kode');
                        return;
                    }
                    authUrl = `${config.authUrl}?client_id=${config.clientId}&redirect_uri=${redirectUri}&response_type=${config.responseType}&scope=${config.scopes}&state=${state}`;
                    break;
                    
                case 'facebook':
                    if (config.appId === 'YOUR_FACEBOOK_APP_ID') {
                        alert('⚠️ Facebook OAuth belum dikonfigurasi!\n\nSilakan:\n1. Buat app di Facebook Developers\n2. Setup Facebook Login\n3. Masukkan App ID di kode');
                        return;
                    }
                    authUrl = `${config.authUrl}?client_id=${config.appId}&redirect_uri=${redirectUri}&scope=${config.scopes}&state=${state}`;
                    break;
                    
                case 'twitter':
                    alert('⚠️ Twitter OAuth memerlukan implementasi PKCE yang lebih kompleks.\n\nUntuk implementasi penuh, diperlukan:\n1. Twitter Developer Account\n2. Backend OAuth handler\n3. Code challenge & verifier');
                    return;
            }
            
            const width = 500;
            const height = 600;
            const left = (screen.width / 2) - (width / 2);
            const top = (screen.height / 2) - (height / 2);
            
            sessionStorage.setItem('oauth_state', state);
            sessionStorage.setItem('oauth_provider', provider);
            
            window.open(authUrl, 'OAuth Login', `width=${width},height=${height},left=${left},top=${top}`);
        }

        // Listener untuk OAuth callback
        window.addEventListener('message', async function(event) {
            if (event.data.type === 'oauth-success') {
                const { provider, accessToken, profile } = event.data;
                await handleSocialLoginSuccess(provider, accessToken, profile);
            }
        });
        
        async function handleSocialLoginSuccess(provider, accessToken, profile) {
            try {
                setLoading('loginBtn', true);
                
                const result = await callGoogleScript('socialLogin', {
                    provider: provider,
                    email: profile.email,
                    name: profile.name,
                    profileId: profile.id
                });
                
                setLoading('loginBtn', false);
                
                if (result && result.success) {
                    localStorage.setItem('userData', JSON.stringify(result.user));
                    document.getElementById('successMessage').textContent = 
                        'Selamat datang, ' + result.user.nickname + '!';
                    showSection('successSection');
                } else {
                    showError('loginError', result?.message || 'Login gagal!');
                }
                
            } catch (error) {
                setLoading('loginBtn', false);
                showError('loginError', 'Terjadi kesalahan saat login dengan ' + provider);
                console.error('Social login error:', error);
            }
        }

        // ============================================
        // FUNGSI CALL API
        // ============================================

        async function callGoogleScript(action, data) {
            try {
                const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
                    redirect: 'follow',
                    method: 'POST',
                    headers: {
                        'Content-Type': 'text/plain;charset=utf-8',
                    },
                    body: JSON.stringify({
                        action: action,
                        data: data
                    })
                });

                const result = await response.json();
                console.log('Response:', result);
                return result;
                
            } catch (error) {
                console.error('Error calling API:', error);
                return { 
                    success: false, 
                    message: 'Tidak dapat terhubung ke server. Pastikan URL Apps Script sudah benar!' 
                };
            }
        }

        // ============================================
        // FUNGSI UTILITAS
        // ============================================

        function showSection(sectionId) {
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
        }

        function showError(errorId, message) {
            const errorEl = document.getElementById(errorId);
            errorEl.textContent = message;
            errorEl.classList.add('show');
            setTimeout(() => {
                errorEl.classList.remove('show');
            }, 5000);
        }

        function hideError(errorId) {
            document.getElementById(errorId).classList.remove('show');
        }

        function setLoading(buttonId, isLoading) {
            const btn = document.getElementById(buttonId);
            const originalText = btn.textContent;
            btn.disabled = isLoading;
            if (isLoading) {
                btn.setAttribute('data-original-text', originalText);
                btn.textContent = 'Memproses...';
            } else {
                btn.textContent = btn.getAttribute('data-original-text') || originalText;
            }
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // ============================================
        // FUNGSI LOGIN
        // ============================================

        async function login() {
            hideError('loginError');
            
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showError('loginError', 'Mohon isi semua field!');
                return;
            }

            if (!validateEmail(email)) {
                showError('loginError', 'Format email tidak valid!');
                return;
            }

            setLoading('loginBtn', true);

            const result = await callGoogleScript('login', { email, password });
            
            setLoading('loginBtn', false);

            if (result && result.success) {
                localStorage.setItem('userData', JSON.stringify(result.user || {
                    email: email,
                    nickname: email.split('@')[0]
                }));
                
                document.getElementById('successMessage').textContent = 
                    'Selamat datang kembali, ' + (result.user?.nickname || 'User') + '!';
                showSection('successSection');
            } else {
                showError('loginError', result?.message || 'Email atau password salah!');
            }
        }

        // ============================================
        // FUNGSI LUPA PASSWORD
        // ============================================

        function showForgotPassword() {
            showSection('forgotPasswordSection');
        }

        async function sendResetCode() {
            hideError('forgotError');
            
            const fullName = document.getElementById('forgotFullName').value.trim();
            const email = document.getElementById('forgotEmail').value.trim();
            const age = document.getElementById('forgotAge').value;

            if (!fullName || !email || !age) {
                showError('forgotError', 'Mohon isi semua field!');
                return;
            }

            if (!validateEmail(email)) {
                showError('forgotError', 'Format email tidak valid!');
                return;
            }

            if (age < 1 || age > 150) {
                showError('forgotError', 'Umur tidak valid!');
                return;
            }

            setLoading('sendCodeBtn', true);

            const result = await callGoogleScript('sendResetCode', { 
                fullName, 
                email, 
                age: parseInt(age) 
            });
            
            setLoading('sendCodeBtn', false);

            if (result && result.success) {
                resetEmail = email;
                showSection('codeVerificationSection');
                startResendTimer();
                document.getElementById('code1').focus();
            } else {
                showError('forgotError', result?.message || 'Data tidak cocok atau email tidak ditemukan!');
            }
        }

        function backToForgotPassword() {
            clearTimeout(resendTimer);
            showSection('forgotPasswordSection');
        }

        // ============================================
        // FUNGSI VERIFIKASI KODE
        // ============================================

        function startResendTimer() {
            let seconds = 60;
            const resendLink = document.getElementById('resendLink');
            const timerSpan = document.getElementById('resendTimer');
            
            resendLink.classList.add('disabled');
            
            resendTimer = setInterval(() => {
                seconds--;
                timerSpan.textContent = seconds;
                
                if (seconds <= 0) {
                    clearInterval(resendTimer);
                    resendLink.classList.remove('disabled');
                    resendLink.innerHTML = 'Kirim ulang kode';
                }
            }, 1000);
        }

        async function resendCode() {
            const resendLink = document.getElementById('resendLink');
            if (resendLink.classList.contains('disabled')) {
                return;
            }
            
            setLoading('verifyCodeBtn', true);
            
            const result = await callGoogleScript('resendResetCode', { 
                email: resetEmail 
            });
            
            setLoading('verifyCodeBtn', false);
            
            if (result && result.success) {
                // Clear code inputs
                for (let i = 1; i <= 6; i++) {
                    document.getElementById('code' + i).value = '';
                }
                document.getElementById('code1').focus();
                startResendTimer();
                alert('✅ Kode verifikasi baru telah dikirim ke email Anda!');
            } else {
                showError('codeError', result?.message || 'Gagal mengirim ulang kode!');
            }
        }

        async function verifyCode() {
            hideError('codeError');
            
            let code = '';
            for (let i = 1; i <= 6; i++) {
                const digit = document.getElementById('code' + i).value;
                if (!digit) {
                    showError('codeError', 'Mohon isi semua digit kode!');
                    return;
                }
                code += digit;
            }

            setLoading('verifyCodeBtn', true);

            const result = await callGoogleScript('verifyResetCode', { 
                email: resetEmail,
                code: code
            });
            
            setLoading('verifyCodeBtn', false);

            if (result && result.success) {
                clearTimeout(resendTimer);
                showSection('newPasswordSection');
            } else {
                showError('codeError', result?.message || 'Kode verifikasi salah!');
                // Clear code inputs
                for (let i = 1; i <= 6; i++) {
                    document.getElementById('code' + i).value = '';
                }
                document.getElementById('code1').focus();
            }
        }

        // ============================================
        // FUNGSI SIMPAN PASSWORD BARU
        // ============================================

        async function saveNewPassword() {
            hideError('newPasswordError');
            
            const newPassword = document.getElementById('newPassword').value;
            const newPasswordConfirm = document.getElementById('newPasswordConfirm').value;

            if (!newPassword || !newPasswordConfirm) {
                showError('newPasswordError', 'Mohon isi semua field!');
                return;
            }

            if (newPassword.length < 8) {
                showError('newPasswordError', 'Password minimal 8 karakter!');
                return;
            }

            if (!/[A-Z]/.test(newPassword)) {
                showError('newPasswordError', 'Password harus mengandung huruf besar!');
                return;
            }

            if (!/[0-9]/.test(newPassword)) {
                showError('newPasswordError', 'Password harus mengandung angka!');
                return;
            }

            if (newPassword !== newPasswordConfirm) {
                showError('newPasswordError', 'Password tidak cocok!');
                return;
            }

            setLoading('savePasswordBtn', true);

            const result = await callGoogleScript('saveNewPassword', { 
                email: resetEmail,
                newPassword: newPassword
            });
            
            setLoading('savePasswordBtn', false);

            if (result && result.success) {
                alert('✅ Password berhasil diubah!\n\nSilakan login dengan password baru Anda.');
                showSection('loginSection');
                // Clear form
                document.getElementById('newPassword').value = '';
                document.getElementById('newPasswordConfirm').value = '';
            } else {
                showError('newPasswordError', result?.message || 'Gagal menyimpan password!');
            }
        }

        // ============================================
        // FUNGSI REGISTRASI
        // ============================================

        function showRegister() {
            showSection('registerSection');
            document.getElementById('progressLine').style.width = '0%';
        }

        function backToLogin() {
            showSection('loginSection');
        }

        function nextToPartner() {
            hideError('registerError');
            
            const fullName = document.getElementById('regFullName').value.trim();
            const nickname = document.getElementById('regNickname').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const password = document.getElementById('regPassword').value;
            const passwordConfirm = document.getElementById('regPasswordConfirm').value;
            const age = document.getElementById('regAge').value;
            const gender = document.querySelector('input[name="regGender"]:checked');

            if (!fullName || !nickname || !email || !password || !passwordConfirm || !age || !gender) {
                showError('registerError', 'Mohon isi semua field!');
                return;
            }

            if (!validateEmail(email)) {
                showError('registerError', 'Format email tidak valid!');
                return;
            }

            if (password.length < 8) {
                showError('registerError', 'Password minimal 8 karakter!');
                return;
            }

            if (!/[A-Z]/.test(password)) {
                showError('registerError', 'Password harus mengandung huruf besar!');
                return;
            }

            if (!/[0-9]/.test(password)) {
                showError('registerError', 'Password harus mengandung angka!');
                return;
            }

            if (password !== passwordConfirm) {
                showError('registerError', 'Password tidak cocok!');
                return;
            }

            if (age < 1 || age > 150) {
                showError('registerError', 'Umur tidak valid!');
                return;
            }

            userData = {
                fullName, nickname, email, password, age, gender: gender.value
            };

            setPartnerGender(gender.value);
            document.getElementById('progressLine').style.width = '50%';
            showSection('partnerSection');
        }

        function setPartnerGender(userGender) {
            const partnerMale = document.getElementById('partnerMale');
            const partnerFemale = document.getElementById('partnerFemale');

            if (userGender === 'Laki-laki') {
                partnerFemale.checked = true;
                partnerMale.checked = false;
            } else {
                partnerMale.checked = true;
                partnerFemale.checked = false;
            }
        }

        function backToRegister() {
            document.getElementById('progressLine').style.width = '0%';
            showSection('registerSection');
        }

        async function completeRegistration() {
            hideError('partnerError');
            
            const partnerFullName = document.getElementById('partnerFullName').value.trim();
            const partnerNickname = document.getElementById('partnerNickname').value.trim();
            const partnerAge = document.getElementById('partnerAge').value;

            if (!partnerFullName || !partnerNickname || !partnerAge) {
                showError('partnerError', 'Mohon isi semua field pasangan!');
                return;
            }

            if (partnerAge < 1 || partnerAge > 150) {
                showError('partnerError', 'Umur pasangan tidak valid!');
                return;
            }

            userData.partner = {
                fullName: partnerFullName,
                nickname: partnerNickname,
                age: partnerAge,
                gender: document.querySelector('input[name="partnerGender"]:checked').value
            };

            setLoading('completeBtn', true);

            const result = await callGoogleScript('register', userData);
            
            setLoading('completeBtn', false);

            if (result && result.success) {
                localStorage.setItem('userData', JSON.stringify({
                    userId: result.userId,
                    fullName: userData.fullName,
                    nickname: userData.nickname,
                    email: userData.email,
                    age: userData.age,
                    gender: userData.gender
                }));
                
                document.getElementById('successMessage').textContent = 
                    'Registrasi berhasil! Selamat datang, ' + userData.nickname + '!';
                showSection('successSection');
            } else {
                showError('partnerError', result?.message || 'Terjadi kesalahan saat registrasi!');
            }
        }

        // ============================================
        // FUNGSI REDIRECT
        // ============================================

        function redirectToGame() {
            const userData = JSON.parse(localStorage.getItem('userData') || '{}');
            console.log('User Data:', userData);
            alert('Data tersimpan! Redirect ke halaman game Anda.\n\nUser: ' + userData.nickname);
            
            // Ganti dengan URL halaman game Anda
            // window.location.href = 'game.html';
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================

        document.addEventListener('DOMContentLoaded', function() {
            console.log('Apps Script URL:', GOOGLE_APPS_SCRIPT_URL);
            
            // Enter key di login
            document.getElementById('loginPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') login();
            });

            // Enter key di forgot password
            document.getElementById('forgotAge').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendResetCode();
            });

            // Paste kode verifikasi
            document.getElementById('code1').addEventListener('paste', function(e) {
                e.preventDefault();
                const pastedData = e.clipboardData.getData('text').replace(/\s/g, '').substring(0, 6);
                for (let i = 0; i < pastedData.length && i < 6; i++) {
                    document.getElementById('code' + (i + 1)).value = pastedData[i];
                }
                if (pastedData.length === 6) {
                    verifyCode();
                }
            });

            // Auto-submit kode saat lengkap
            document.getElementById('code6').addEventListener('input', function() {
                if (this.value.length === 1) {
                    setTimeout(verifyCode, 300);
                }
            });

            // Hover effect pada input
            document.querySelectorAll('input, select').forEach(input => {
                input.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                input.addEventListener('mouseleave', function() {
                    if (document.activeElement !== this) {
                        this.style.transform = 'translateY(0)';
                    }
                });
            });
        });
    </script>
</body>
</html>